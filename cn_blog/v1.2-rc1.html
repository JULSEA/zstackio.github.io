<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/images/zstack_text_icon_32x32.gif" type="image/gif">
    <meta name="description" content="ZStack : ZStack is open source IaaS software managing resources of compute, storage, networking throughout a datacenter all by APIs.">
    <meta name="keywords" content="ZStack, OpenStack, CloudStack, IaaS, Docker, Open Source">

    <title>ZStack - ZStack v1.2 RC1 发布</title>
    <script type="text/javascript" src="/js/google_analytics.js"></script>
    <link href="/css/bootstrap-3.3.1/css/bootstrap.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/code.css" rel="stylesheet">
    <link href="/css/zstack.css?v=1.1" rel="stylesheet">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:url" content="http://zstack.org/" />
    <meta name="twitter:title" content="ZStack" />
    <meta name="twitter:description" content="ZStack is open source IaaS software managing resources of compute, storage, networking throughout a datacenter all by APIs." />
    <meta name="twitter:site" content="@zstack_org" />

    <!-- Facebook -->
    <meta property="og:side_name" content="ZStack" />
    <meta property="og:title" content="ZStack" />
    <meta property="og:url" content="http://zstack.org/" />
    <meta property="og:description" content="ZStack is open source IaaS software managing resources of compute, storage, networking throughout a datacenter all by APIs." />

</head>


<body>


<nav id="header" class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">ZStack</a>
        </div>

        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li id="navHome"><a href="/cn/">主 页</a></li>
                <li id="navInstallation">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">安 装 <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="/cn/installation/">一键安装</a></li>
                    <li><a href="/cn/installation/manual.html">手动安装</a></li>
                    <li><a href="/cn/installation/multi-node.html">多节点安装</a></li>
                  </ul>
                </li>
                <li id="navTutorials"><a href="/cn/tutorials">教 程</a></li>
                <li id="navDocumentation"><a href="/cn/documentation">文 档</a></li>
                <li id="navBlog"><a href="/cn/blog">博 客</a></li>
                <li id="navCommunity"><a href="/cn/community">社 区</a></li>
                <li id="navIssues"><a href="https://github.com/zstackorg/zstack/issues">提 问</a></li>
                <li id="navIssues"><a href="http://zstack.tw">繁体</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="container big-font">
  <div class="row">
    <div class="col-xs-12">
    <div class="post">

  <header class="post-header">
    <h2 class="post-title">ZStack v1.2 RC1 发布</h2>
    <p class="post-meta"> by Frank Zhang on Apr 22, 2016</p>
    <div style="margin-bottom: 15px">
      
<!--
<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
  <a class="a2a_button_facebook"></a>
  <a class="a2a_button_twitter"></a>
  <a class="a2a_button_google_plus"></a>
  <a class="a2a_button_linkedin"></a>
  <a class="a2a_button_reddit"></a>
  <a class="a2a_button_hacker_news"></a>
  <a class="a2a_button_sina_weibo"></a>
  <a class="a2a_dd" href="https://www.addtoany.com/share_save"></a>
</div>
<script type="text/javascript" src="//static.addtoany.com/menu/page.js"></script>
-->

<!-- AddToAny BEGIN -->
<div class="a2a_kit a2a_default_style">
  <a class="a2a_button_facebook"></a>
  <a class="a2a_button_twitter"></a>
  <a class="a2a_button_google_plus"></a>
  <a class="a2a_button_linkedin"></a>
  <a class="a2a_button_reddit"></a>
  <a class="a2a_button_hacker_news"></a>
  <a class="a2a_button_sina_weibo"></a>
  <span class="a2a_divider"></span>
  <a class="a2a_dd" href="https://www.addtoany.com/share_save">Share</a>
</div>
<script type="text/javascript" src="//static.addtoany.com/menu/page.js"></script>
<!-- AddToAny END -->

    </div>
  </header>


  <article class="post-content">
    <h2>ZStack 1.2 RC1 版本今天发布</h2>

<p>ZStack 1.2 RC1 版本今天发布，欢迎大家下载试用。在该版中，我们修复了1.1版本中发现的bug，并增加了分布EIP、shared mountpoint主存储支持、数据库自动备份、Systemd支持等新功能。用户不再需要使用Virtual Router就可以使用EIP网络模式，也可以无缝的使用GlusterFS、MooseFS、OCFS2等分布式文件系统作为主存储。具体细节参考以下章节。</p>

<h2>新增功能</h2>

<ul>
<li><a href="#eip">分布式EIP</a></li>
<li><a href="#smp">Shared Mountpoint主存储</a></li>
<li><a href="#database">数据库定时备份</a></li>
<li><a href="#systemd">Systemed支持</a></li>
<li><a href="#cachemode">KVM缓存模式配置</a></li>
<li><a href="#userdata">AWS EC2模式Userdata支持</a></li>
</ul>


<h2>安装升级</h2>

<ul>
<li><a href="#install">安装</a></li>
<li><a href="#offlineinstall">离线安装</a></li>
<li><a href="#upgrade">升级</a></li>
</ul>


<h3 id="eip">1. 分布式EIP </h3>


<p>在1.0版本中，我们增加了一个新的网络服务组件：FlatNetwork Provider，可以提供分布式DHCP支持。在1.2版本中，我们继续增强了该provider的功能，加入了分布式EIP支持。通过这种方式，用户无需再使用传统的virtual router方式就可以部署EIP网络模型，拥有独立的私有网络，并将公网IP地址映射到私有网络的中的云主机去。ZStack的分布式EIP通过Linux的network namespace实现，原理图如下：</p>

<p><img src="/images/1.2/eipoverview.png" class="center-img img-responsive"></p>

<p>要使用分布式EIP，用户只需在创建L3网络的时候，选择Flat Network Service Provider作为网络服务提供组件，并选择加载EIP服务即可。步骤如图：</p>

<p><img src="/images/1.2/eip1.png" class="center-img img-responsive">
<img src="/images/1.2/eip2.png" class="center-img img-responsive"></p>

<p>要绑定EIP到私有网络的云主机，参考教程<a href="http://zstack.org/cn/tutorials/ec2-ui.html">经典Amazon EC2 EIP环境</a>第15节即可。</p>

<h3 id="smp">2. Shared Mountpoint主存储</h3>


<p>在1.2版本中，我们新增了一种主存储(Primary Storage)类型：Shared Mountpoint Storage。通过该主存储，ZStack可以支持任何符合POSIX文件系统规范的分布式文件系统，例如大家熟悉的GlusterFS、MooseFS、OCFS2等。</p>

<p>在使用前，用户需要先部署好你所使用的分布式文件系统，并将它mount到所有host相同的目录上，例如将GlusterFS mount到所有host的/glusterfs_dir目录中。在添加主存储时，选择类型“SharedMountPoint”并输入对应目录绝对路径即可，如图：</p>

<blockquote><p>我们建议用户把mount分布式文件系统的命令放到每个host的/etc/rc.local或/etc/fstab当中，以避免host重启后，分布式文件系统没有挂载的情况。</p></blockquote>

<p><img src="/images/1.2/smp.png" class="center-img img-responsive"></p>

<h3 id="database">3. 数据库定时备份</h3>


<p>在1.2版本中，我们提供了一个新的命令<code>zstack-ctl dump_mysql</code>为用户备份ZStack的数据库：</p>

<pre><code>    [root@172-20-12-46 ~]# zstack-ctl dump_mysql -h
    usage: zstackctl dump_mysql [-h] [--file-name FILE_NAME]
                                [--keep-amount KEEP_AMOUNT]

    optional arguments:
        -h, --help            show this help message and exit
        --file-name FILE_NAME
                              The filename you want to save the database, default is
                              'zstack-backup-db'
        --keep-amount KEEP_AMOUNT
                              The amount of backup files you want to keep, older
                              backup files will be deleted, default number is 60
</code></pre>

<p>在使用zstack all-in-one安装包安装后，我们会默认建立一个<code>crontab</code>任务定时备份数据库，其设置为：</p>

<pre><code>30 0,12 * * * zstack-ctl dump_mysql --keep-amount 14
</code></pre>

<p>用户可以用<code>crontab -l</code>的命令查看，或用<code>crontab -e</code>修改。</p>

<h3 id="cachemode">5. KVM cache mode选项</h3>


<p>在1.2版本中，用户可以通过修改全局设置的来指定启动云主机时，KVM对云盘使用的缓存模式。支持三种模式：</p>

<ul>
<li>none:云主机不使用物理机的页面缓存，直接访问存储，不带cache。<strong>默认模式</strong></li>
<li>writethrough:物理机的页面缓存工作在透写模式，数据完全写入云主机存储设备后，才返回成功。</li>
<li>writeback:云主机使用了物理机的页面缓存机制，数据写入物理机页面缓存即报告给云主机返回成功。</li>
</ul>


<p>KVM cache mode的具体解释可以参考<a href="https://www.ibm.com/support/knowledgecenter/linuxonibm/liaat/liaatbpkvmguestcache.htm">这篇文章</a>。</p>

<p>要修改该选项，可以使用UI：</p>

<p><img src="/images/1.2/cachemode.png" class="center-img img-responsive"></p>

<p>或命令行：</p>

<pre><code>&gt;&gt;UpdateGlobalConfig category=kvm name=vm.cacheMode value=writethrough
</code></pre>

<h3 id="userdata">6. AWS EC2模式Userdata支持</h3>


<p>在1.0版本中，我们加入了对userdata的支持，使用的是CloudStack默认，用户需要修改cloud-init配置文件才能使用。在1.2版本中，我们将userdata的支持方式换成了AWS EC2模式，即云主机操作系统可以通过169.254.169.254这个IP地址获得userdata。该模式是cloud-init的默认模式，用户只需安装cloud-init包，无需修改任何配置就可以直接使用。此外，用户也可以从Ubuntu和Centos的官方网站上下载预装cloud-init的镜像直接使用。</p>

<h3 id="systemd">7. Systemd支持</h3>


<p>在1.2版本中，我们加入了对systemd的支持，用户可以通过<code>systemctl</code>来控制zstack管理节点的生命周期。这同时修复了安装了zstack管理节点关机慢的问题。</p>

<p><img src="/images/1.2/systemd.png" class="center-img img-responsive"></p>

<h3 id="install">8. 安装</h3>


<p>你可以通过下面方式安装：</p>

<pre><code>    wget http://download.zstack.org/releases/1.2/1.2.0/rc1/zstack-installer-1.2.0-rc1.bin
    bash zstack-installer-1.2.0-rc1.bin -R aliyun
</code></pre>

<blockquote><p>这里<code>-R aliyun</code>参数指定使用阿里云的源进行安装，你也可以使用<code>-R 163</code>使用网易的源。我们推荐使用阿里云的源</p></blockquote>

<h3 id="offlineinstall">9. 离线安装</h3>


<p>针对内网用户,以及访问Internet速度较慢的用户.ZStack 1.2 提供了离线安装方式.
用户若需要离线安装ZStack,需要在目标管理节点和计算节点上安装CentOS 7.2 ZStack社区版.</p>

<p>然后在下载了第8步中的 zstack-installer 之后,你可以通过下面方式快速完成离线安装：</p>

<pre><code>    bash zstack-installer-1.2.0-rc1.bin -o
</code></pre>

<p>具体的离线安装教程和CentOS 7.2 ZStack社区版请阅读: <a href="./offline-install-zstack-from-custom-iso.html">ZStack离线安装教程</a></p>

<h3 id="upgrade">10. 升级 </h3>


<p>一如既往的，我们支持一键无缝升级：</p>

<pre><code>    wget http://download.zstack.org/releases/1.2/1.2.0/rc1/zstack-installer-1.2.0-rc1.bin
    bash zstack-installer-1.2.0-rc1.bin -u
</code></pre>

<p>多节点升级中的zstack.war请等待正式版发布。</p>

  </article>

  <div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = 'zstackorg';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>

    </div>
  </div>
</div>

<script src="/js/jquery-1.9.1.js"></script>
<script src="/css/bootstrap-3.3.1/js/bootstrap.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
    var path = window.location.pathname;
    if (path == '/') {
      $('#navHome').addClass('active');
      return;
    }

    var paths = path.split("/");
    var root = paths[1];
    switch(root){
      case 'installation':
        $('#navInstallation').addClass('active');
        break;
      case 'tutorials':
        $('#navTutorials').addClass('active');
        break;
      case 'documentation':
        $('#navDocumentation').addClass('active');
        break;
      case 'community':
        $('#navCommunity').addClass('active');
        break;
      case 'issues':
        $('#navIssues').addClass('active');
        break;
      case 'license':
        $('#navLicense').addClass('active');
        break;
      case 'blog':
        $('#navBlog').addClass('active');
        break;
    }
  });
</script>


<div id="footer">
  <div class="container zstack-footer-before zstack-footer-after">
    <div class="row zstack-footer-links">
      <div class="col-sm-3 col-sm-offset-1">
        <p class="footer-text-title">社区</p>
        <ul class="footer-ul">
          <li><a class="footer-text-link" href="https://groups.google.com/forum/#!forum/zstack"> 订阅邮件组</a></li>
          <li><a class="footer-text-link" href="http://www.zstack.org/community">社区介绍</a></li>
          <li><a class="footer-text-link" href="/cn/misc/qq.html">QQ群</li>
          <li><a class="footer-text-link" href="/cn/misc/wechat.html">微信订阅号</a></li>
        </ul>
      </div>
      <div class="col-sm-3">
        <p class="footer-text-title">资源</p>
        <ul class="footer-ul">
          <li><a class="footer-text-link" href="http://www.zstack.org/installation">安装手册</a></li>
          <li><a class="footer-text-link" href="http://www.zstack.org/tutorials">使用教程</a></li>
          <li><a class="footer-text-link" href="http://zstackdoc.readthedocs.org/en/latest/userManual/cli.html">zstack-cli命令行工具</a></li>
          <li><a class="footer-text-link" href="http://www.zstack.org/blog">新闻博客</a></li>
        </ul>
      </div>
      <div class="col-sm-4">
        <p class="footer-text-title">联系我们</p>
        <ul class="footer-ul">
          <a title="Twitter" class="contact-icon contact-icon-size fa fa-twitter" href="https://twitter.com/zstack_org" target="_blank"></a>&nbsp;&nbsp;
          <a title="Facebook" class="contact-icon contact-icon-size fa fa-facebook" href="https://www.facebook.com/zstackorg" target="_blank"></a>&nbsp;&nbsp;
          <a title="Github" class="contact-icon contact-icon-size fa fa-github-alt" href="https://github.com/zstackorg/zstack" target="_blank"></a>&nbsp;&nbsp;
          <a title="Wechat" class="contact-icon contact-icon-size fa fa-weixin" href="../misc/wechat.html" target="_blank"></a>&nbsp;&nbsp;
          <a title="Weibo" class="contact-icon contact-icon-size fa fa-weibo" href="http://weibo.com/zstack" target="_blank"></a>&nbsp;&nbsp;
        </ul>
        <ul class="footer-ul zstack-footer-before2">
          <li><i>ZStack 是开源的IaaS软件，其开源代码遵守 Apache 2.0 协议的规定.</i></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="footer-last">
  <div>
      <i><b>我们非常重视您的观点，请把您的想法告诉我们。 &nbsp;&nbsp;<a title="Email" class="contact-icon fa fa-envelope" href="mailto:info@zstack.org"></a></b> <i>
  </div>
</div>

</body>



</html>
