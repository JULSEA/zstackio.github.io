<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/images/zstack_text_icon_32x32.gif" type="image/gif">
    <meta name="description" content="ZStack : ZStack is open source IaaS software managing resources of compute, storage, networking throughout a datacenter all by APIs.">
    <meta name="keywords" content="ZStack, OpenStack, CloudStack, IaaS, Docker, Open Source">

    <title>ZStack - ZStack v1.1 RC1 发布</title>
    <script type="text/javascript" src="/js/google_analytics.js"></script>
    <link href="/css/bootstrap-3.3.1/css/bootstrap.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/code.css" rel="stylesheet">
    <link href="/css/zstack.css?v=1.1" rel="stylesheet">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:url" content="http://zstack.org/" />
    <meta name="twitter:title" content="ZStack" />
    <meta name="twitter:description" content="ZStack is open source IaaS software managing resources of compute, storage, networking throughout a datacenter all by APIs." />
    <meta name="twitter:site" content="@zstack_org" />

    <!-- Facebook -->
    <meta property="og:side_name" content="ZStack" />
    <meta property="og:title" content="ZStack" />
    <meta property="og:url" content="http://zstack.org/" />
    <meta property="og:description" content="ZStack is open source IaaS software managing resources of compute, storage, networking throughout a datacenter all by APIs." />

</head>


<body>


<nav id="header" class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">ZStack</a>
        </div>

        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li id="navHome"><a href="/cn/">主 页</a></li>
                <li id="navInstallation">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">安 装 <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="/cn/installation/">一键安装</a></li>
                    <li><a href="/cn/installation/manual.html">手动安装</a></li>
                    <li><a href="/cn/installation/multi-node.html">多节点安装</a></li>
                  </ul>
                </li>
                <li id="navTutorials"><a href="/cn/tutorials">教 程</a></li>
                <li id="navDocumentation"><a href="/cn/documentation">文 档</a></li>
                <li id="navBlog"><a href="/cn/blog">博 客</a></li>
                <li id="navCommunity"><a href="/cn/community">社 区</a></li>
                <li id="navIssues"><a href="https://github.com/zstackorg/zstack/issues">提 问</a></li>
                <li id="navIssues"><a href="http://zstack.tw">繁体</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="container big-font">
  <div class="row">
    <div class="col-xs-12">
    <div class="post">

  <header class="post-header">
    <h2 class="post-title">ZStack v1.1 RC1 发布</h2>
    <p class="post-meta"> by Yongkang You on Mar 26, 2016</p>
    <div style="margin-bottom: 15px">
      
<!--
<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
  <a class="a2a_button_facebook"></a>
  <a class="a2a_button_twitter"></a>
  <a class="a2a_button_google_plus"></a>
  <a class="a2a_button_linkedin"></a>
  <a class="a2a_button_reddit"></a>
  <a class="a2a_button_hacker_news"></a>
  <a class="a2a_button_sina_weibo"></a>
  <a class="a2a_dd" href="https://www.addtoany.com/share_save"></a>
</div>
<script type="text/javascript" src="//static.addtoany.com/menu/page.js"></script>
-->

<!-- AddToAny BEGIN -->
<div class="a2a_kit a2a_default_style">
  <a class="a2a_button_facebook"></a>
  <a class="a2a_button_twitter"></a>
  <a class="a2a_button_google_plus"></a>
  <a class="a2a_button_linkedin"></a>
  <a class="a2a_button_reddit"></a>
  <a class="a2a_button_hacker_news"></a>
  <a class="a2a_button_sina_weibo"></a>
  <span class="a2a_divider"></span>
  <a class="a2a_dd" href="https://www.addtoany.com/share_save">Share</a>
</div>
<script type="text/javascript" src="//static.addtoany.com/menu/page.js"></script>
<!-- AddToAny END -->

    </div>
  </header>


  <article class="post-content">
    <h2>ZStack 1.1 RC1 版本今天发布</h2>

<p>ZStack 1.1 RC1 版本今天发布，欢迎大家下载试用。在该版本中，我们主要针对1.0 版本做了性能和稳定性相关的工作。
某些性能指标提升超过10倍,例如consoleproxy在管理节点重启后会立刻安装完毕.
在ZStack 1.1 正式版发布的时候我们还会提供一个离线版的CentOS7.1的安装ISO和ZStack 1.1的离线安装方法。</p>

<h2>新增功能</h2>

<ul>
<li><a href="#ansible">Ansible 优化</a></li>
<li><a href="#consoleproxy">ConsoleProxy 重连API</a></li>
<li><a href="#timeout">API超时管理框架</a></li>
<li><a href="#reclaim">垃圾自动回收</a></li>
<li><a href="#zstackimage">15M超小试用镜像--支持动态添加删除云盘和网络</a></li>
<li><a href="#virtualrouter">更新虚拟路由（VirtualRouter）镜像</a></li>
<li><a href="#migration">修改CentOS7.2 无法热迁移VM的Bug</a></li>
</ul>


<h2>安装升级</h2>

<ul>
<li><a href="#install">安装</a></li>
<li><a href="#upgrade">升级</a></li>
<li><a href="#upgradenetwork">Virtual Router Provider升级到Flat Network Porvider</a></li>
</ul>


<h3 id="ansible">1. Ansible优化 </h3>


<p>在1.1版本中，我们不再使用Ansible Playbook的方式去部署agent，而是直接使用了Ansible的原生SDK，为每个agent都定制了单独的部署程序，使得部署的稳定性和效率得到了极大的提高。</p>

<p>新的Ansible部署工具会自动检查系统依赖包的安装情况，只在有依赖包缺失的情况下才访问yum或apt源，避免了重启ZStack和升级ZStack过程中，由于访问外网抖动导致的物理机重连失败的问题，提高了系统的稳定性。新的部署工具也会检查Python依赖，解决了升级过程中consoleproxy依赖的websockify重复编译问题，升级consoleproxy的部署时间从原来的5分钟缩减到了4秒。</p>

<h3 id="consoleproxy">2. ConsoleProxy重连API </h3>


<p>在1.1版本中，我们加入了console proxy的重连和查询API，用户不再需要通过重启ZStack来重新部署console proxy。</p>

<pre><code>    &gt;&gt;&gt;QueryConsoleProxyAgent 
    {
        "inventories": [
            {
                "createDate": "Mar 26, 2016 12:53:17 PM",
                "description": "Console proxy agent running on the management node[uuid:ae80b109e9ca4f4c81191cd2ffe43000]",
                "lastOpDate": "Mar 26, 2016 12:53:22 PM",
                "managementIp": "172.20.12.46",
                "state": "Enabled",
                "status": "Connected",
                "type": "ManagementServerConsoleProxy",
                "uuid": "ae80b109e9ca4f4c81191cd2ffe43000"
            }
        ],
        "success": true
    }

    &gt;&gt;&gt;ReconnectConsoleProxyAgent 
    {
        "inventory": {
            "ae80b109e9ca4f4c81191cd2ffe43000": true
        },
        "success": true
    }
</code></pre>

<h3 id="timeout">3. API超时管理框架</h3>


<p>ZStack所有功能由大量相互独立的微服务实现，服务之间使用异步消息通信，通常一个API会涉及到多个消息以及跟Agent端的HTTP调用，超时管理成为一个难题。在1.1版本中，我们加入了统一的API超时管理框架，用户无需关心底层细节。在当前版本中，用户如果需要改变默认的API超时，暂时还需要通过zstack.properties文件来改变，例如需要改变AddImage的API超时为6个小时，需要在zstack.properties添加如下配置：</p>

<p>ApiTimeout.org.zstack.header.image.APIAddImageMsg= org.zstack.header.storage.backup.DownloadImageMsg, org.zstack.storage.backup.sftp.SftpBackupStorageCommands$DownloadCmd, org.zstack.storage.ceph.backup.CephBackupStorageBase$DownloadCmd; 6h</p>

<p>NOTE：目前我们为所有耗时的API都设置了默认3小时的超时时间，用户在如无特殊需要，不建议通过配置的方式进行修改。我们在1.2版本会新加超时管理API，用户可以直接通过API来设定相应操作的超时时间。</p>

<h3 id="reclaim">4. 垃圾回收机制</h3>


<p>在1.1版本中，我们全面开启了跟虚拟机相关的垃圾回收器，可以自动回收由于网络故障、物理机故障导致的遗留资源，而不阻碍用户操作。</p>

<p> 场景：</p>

<p>物理机网络失联导致用户无法删除该物理机上运行的虚拟机。在早前的ZStack版本中，用户需要等待物理机网络恢复后再执行删除操作。有了垃圾回收器后，用户可以直接删除虚拟机，后台会记录该删除操作。垃圾回收器会在物理机网络恢复后自动触发，执行未完成的操作。</p>

<p>目前已经启动的垃圾回收器包括云主机、云盘、快照，更多的垃圾回收器会在未来版本中逐一开放。</p>

<p>ZStack的垃圾回收器非常智能，支持时间轮询和事件触发，其中事件触发支持多种关联事件。例如在前面的例子中，如果管理员在物理机网络恢复前又删除了该物理机，垃圾回收器也会被触发，清除之前提交的删除该物理机上虚拟机的任务。</p>

<h3 id="virtualrouter">5. 新虚拟路由（Virtual Router）镜像</h3>


<p>VirtualRouter image 更新到了 zstack-virtualrouter-1.1.0.qcow2 .我们除了更新了VirtualRouter 对应的services外，还提高了VirtualRouter的安全访问方式：</p>

<ol>
<li>修改了virtual router 默认的密码，原先的默认密码是 password。以后用户无法用密码登录Virtual Router</li>
<li>使用了用户特别的 SSH public key。 这个public key是用户在安装ZStack的时候自动产生的，可以保证每个用户都是用不同的SSH key。 用户可以使用私有的 SSH private key从Virtual Router的管理网络登录。 该SSH private key 默认存放在管理节点： /usr/local/zstack/apache-tomcat/webapps/zstackWEB-INF/classes/ansible/rsaKeys/id_rsa</li>
</ol>


<p>用户可以下载并替换原有VirtualRouter Image: http://download.zstack.org/templates/zstack-virtualrouter-1.1.0.qcow2</p>

<p>替换原有VirtualRouter的方法是：</p>

<ol>
<li>从UI上下载最新的VirtualRouter image，例如命名为 zstack-vr-1.1-image</li>
<li>从镜像服务器删除老的VirtualRouter Image</li>
<li>删除老的VirtualRouter Offering</li>
<li>创建新的VirtualRouter Offering，并且选择新下载的zstack-vr-1.1-image做为VirtualRouter Offering的镜像。其他网络配置不变。</li>
<li>从UI面板的Virtual Router菜单中删除现有的VirtualRouter VM</li>
<li>选择使用VR的L3网络重新创建一个普通VM，ZStack就会使用新的Virtual Router镜像创建一个新的虚拟路由。</li>
</ol>


<h3 id="zstackimage">6. 15M超小试用镜像--支持动态添加删除云盘和网络 </h3>


<p>在1.1我们为ZStack专门构建了一个只有15M的测试镜像，支持网络、SSHD，用户可以用它来做一些基本测试。相比于之前的1.0的测试镜像，该镜像支持了动态添加删除云盘和网络。下载链接：</p>

<pre><code>     http://download.zstack.org/templates/zstack-image-1.2.qcow2
</code></pre>

<p>感谢Robert Yang(@linuxer)提供该镜像!</p>

<h3 id="migration"> 7. 修复CentOS7.2 物理机无法热迁移VM的bug</h3>


<p>CentOS7.2 修改了热迁移VM的libvirt的相关代码，导致如果用户没有显示的设置物理机Hostname的情况下，云主机无法热迁移。ZStack以及给RedHat报告了问题。
不过在ZStack 1.1中，我们做了特别的改动来避免CentOS7.2 的这个bug。</p>

<h3 id="install"> 8. 安装 </h3>


<p>你可以通过下面方式安装：</p>

<pre><code>    wget http://download.zstack.org/releases/1.1/1.1.0/rc1/zstack-installer-1.1.0-rc1.bin -O zstack-installer-1.1.0-rc1.bin
    bash zstack-installer-1.1.0-rc1.bin -R aliyun
</code></pre>

<blockquote><p>这里<code>-R aliyun</code>参数指定使用阿里云的源进行安装，你也可以使用<code>-R 163</code>使用网易的源。我们推荐使用阿里云的源</p></blockquote>

<h3 id="upgrade"> 9. 升级 </h3>


<p>一如既往的，我们支持一键无缝升级：</p>

<pre><code>    wget http://download.zstack.org/releases/1.1/1.1.0/rc1/zstack-installer-1.1.0-rc1.bin -O zstack-installer-1.1.0-rc1.bin
    bash zstack-installer-1.1.0-rc1.bin -u
</code></pre>

<h3 id="upgradenetwork"> 10. 用Flat Network Provider替换Virtual Router Provider </h3>


<p>如果你的网络模式是扁平网络，并且使用的是Virtual Rotuer Provider作为网络提供商，你可以使用1.0的Flat Network Provider替换它，这样你就不再需要virtual router VM来充当DHCP服务器了。假定你要替换网络提供商的L3网络的UUID是1a82c2691978476fa6cefa36bb9d4bfd，参考以下步骤：</p>

<ol>
<li><p>获得当前L3网络的网络提供商UUID</p>

<pre><code> &gt;&gt;&gt;QueryNetworkServiceL3NetworkRef l3NetworkUuid=1a82c2691978476fa6cefa36bb9d4bfd
 {
     "inventories": [
         {
             "l3NetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
             "networkServiceProviderUuid": "5d21ea0f39c04d6fb68cfaf5a37db4ad",
             "networkServiceType": "DNS"
         },
         {
             "l3NetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
             "networkServiceProviderUuid": "5d21ea0f39c04d6fb68cfaf5a37db4ad",
             "networkServiceType": "DHCP"
         }
     ],
     "success": true
 }
</code></pre></li>
<li><p>从L3网络上卸载Virtual Router Provider</p>

<pre><code> &gt;&gt;&gt;DetachNetworkServiceFromL3Network  l3NetworkUuid=1a82c2691978476fa6cefa36bb9d4bfd networkServices='{"5d21ea0f39c04d6fb68cfaf5a37db4ad":["DHCP","DNS"]}'
 {
     "inventory": {
         "createDate": "Jan 30, 2016 3:01:03 PM",
         "dns": [
             "8.8.8.8"
         ],
         "ipRanges": [
             {
                 "createDate": "Jan 30, 2016 3:01:04 PM",
                 "endIp": "192.168.201.199",
                 "gateway": "192.168.200.1",
                 "l3NetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
                 "lastOpDate": "Jan 30, 2016 3:01:04 PM",
                 "name": "ipr-dk7p",
                 "netmask": "255.255.252.0",
                 "startIp": "192.168.201.180",
                 "uuid": "ec5fd87dd80243fdabeeace847c04427"
             }
         ],
         "l2NetworkUuid": "9ec8cad681d1424fa7eda2447edae142",
         "lastOpDate": "Jan 30, 2016 3:01:03 PM",
         "name": "l3-etpz",
         "networkServices": [],
         "state": "Enabled",
         "system": false,
         "type": "L3BasicNetwork",
         "uuid": "1a82c2691978476fa6cefa36bb9d4bfd",
         "zoneUuid": "4a3a78b1b9f049948b79cf9e667f0af2"
     },
     "success": true
 }
</code></pre></li>
</ol>


<blockquote><p>注意这里的参数networkServices是一个map， key是第一步里返回的networkServiceProviderUuid，value是第一步里返回的networkServiceType</p></blockquote>

<ol>
<li><p>获得Flat Network Provider的UUID</p>

<pre><code> &gt;&gt;&gt;QueryNetworkServiceProvider type=Flat
 {
     "inventories": [
         {
             "attachedL2NetworkUuids": [
                 "9ec8cad681d1424fa7eda2447edae142"
             ],
             "createDate": "Jan 30, 2016 11:56:32 AM",
             "description": "Flat Network Service Provider",
             "lastOpDate": "Jan 30, 2016 11:56:32 AM",
             "name": "Flat Network Service Provider",
             "networkServiceTypes": [
                 "DHCP",
                 "Userdata"
             ],
             "type": "Flat",
             "uuid": "17864f985e584a9ba4cd81de215212ce"
         }
     ],
     "success": true
 }
</code></pre></li>
<li><p>获得承载L3网络的L2网络的UUID</p>

<pre><code> &gt;&gt;&gt;QueryL3Network fields=l2NetworkUuid, uuid=1a82c2691978476fa6cefa36bb9d4bfd
 {
     "inventories": [
         {
             "l2NetworkUuid": "9ec8cad681d1424fa7eda2447edae142"
         }
     ],
     "success": true
 }
</code></pre></li>
<li><p>加载Flat Network Provider到L2网络</p>

<pre><code> &gt;&gt;&gt;AttachNetworkServiceProviderToL2Network l2NetworkUuid=9ec8cad681d1424fa7eda2447edae142 networkServiceProviderUuid=17864f985e584a9ba4cd81de215212ce
 {
     "inventory": {
         "attachedL2NetworkUuids": [
             "9ec8cad681d1424fa7eda2447edae142"
         ],
         "createDate": "Jan 30, 2016 11:56:32 AM",
         "description": "Flat Network Service Provider",
         "lastOpDate": "Jan 30, 2016 11:56:32 AM",
         "name": "Flat Network Service Provider",
         "networkServiceTypes": [
             "DHCP",
             "Userdata"
         ],
         "type": "Flat",
         "uuid": "17864f985e584a9ba4cd81de215212ce"
     },
     "success": true
 }
</code></pre></li>
<li><p>加载Flat Network Provider的服务到三层网络</p>

<pre><code> &gt;&gt;&gt;AttachNetworkServiceToL3Network l3NetworkUuid=1a82c2691978476fa6cefa36bb9d4bfd networkServices='{"17864f985e584a9ba4cd81de215212ce":["DHCP","Userdata"]}'
 {
     "inventory": {
         "createDate": "Jan 30, 2016 3:01:03 PM",
         "dns": [
             "8.8.8.8"
         ],
         "ipRanges": [
             {
                 "createDate": "Jan 30, 2016 3:01:04 PM",
                 "endIp": "192.168.201.199",
                 "gateway": "192.168.200.1",
                 "l3NetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
                 "lastOpDate": "Jan 30, 2016 3:01:04 PM",
                 "name": "ipr-dk7p",
                 "netmask": "255.255.252.0",
                 "startIp": "192.168.201.180",
                 "uuid": "ec5fd87dd80243fdabeeace847c04427"
             }
         ],
         "l2NetworkUuid": "9ec8cad681d1424fa7eda2447edae142",
         "lastOpDate": "Jan 30, 2016 3:01:03 PM",
         "name": "l3-etpz",
         "networkServices": [
             {
                 "l3NetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
                 "networkServiceProviderUuid": "17864f985e584a9ba4cd81de215212ce",
                 "networkServiceType": "DHCP"
             },
             {
                 "l3NetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
                 "networkServiceProviderUuid": "17864f985e584a9ba4cd81de215212ce",
                 "networkServiceType": "Userdata"
             }
         ],
         "state": "Enabled",
         "system": false,
         "type": "L3BasicNetwork",
         "uuid": "1a82c2691978476fa6cefa36bb9d4bfd",
         "zoneUuid": "4a3a78b1b9f049948b79cf9e667f0af2"
     },
     "success": true
 }
</code></pre></li>
<li><p>删除virtualrouter ,删除virtual router offering</p>

<pre><code> &gt;&gt;&gt;QueryVirtualRouterVm
 {
     "inventories": [
         {
             "allVolumes": [
                 {
                     "createDate": "Jan 30, 2016 3:06:50 PM",
                     "description": "Root volume for VM[uuid:c5a966cb87d644649952daf683f89e26]",
                     "deviceId": 0,
                     "format": "qcow2",
                     "installPath": "/zstack_ps/rootVolumes/acct-36c27e8ff05c4780bf6d2fa65700f22e/vol-8eeaa9cb4c1045a2825f8815fed69d72/8eeaa9cb4c1045a2825f8815fed69d72.qcow2",
                     "lastOpDate": "Jan 30, 2016 3:06:59 PM",
                     "name": "ROOT-for-virtualRouter.l3.1a82c2691978476fa6cefa36bb9d4bfd",
                     "primaryStorageUuid": "4bff4e2d266f480ead596752d14ff3b5",
                     "rootImageUuid": "7bed05aa8ace4e5e8d6c55b284b66fb5",
                     "size": 467206656,
                     "state": "Enabled",
                     "status": "Ready",
                     "type": "Root",
                     "uuid": "8eeaa9cb4c1045a2825f8815fed69d72",
                     "vmInstanceUuid": "c5a966cb87d644649952daf683f89e26"
                 }
             ],
             "allocatorStrategy": "LeastVmPreferredHostAllocatorStrategy",
             "applianceVmType": "VirtualRouter",
             "clusterUuid": "10409d3e33b249c19746022930a541c7",
             "cpuNum": 1,
             "cpuSpeed": 2,
             "createDate": "Jan 30, 2016 3:06:50 PM",
             "defaultRouteL3NetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
             "hostUuid": "415fa093b34e4a3d873368104b127115",
             "hypervisorType": "KVM",
             "imageUuid": "7bed05aa8ace4e5e8d6c55b284b66fb5",
             "instanceOfferingUuid": "9cec7bd6324445a184351ffb7d32f970",
             "lastHostUuid": "415fa093b34e4a3d873368104b127115",
             "lastOpDate": "Jan 30, 2016 3:07:20 PM",
             "managementNetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
             "memorySize": 536870912,
             "name": "virtualRouter.l3.1a82c2691978476fa6cefa36bb9d4bfd",
             "platform": "Linux",
             "publicNetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
             "rootVolumeUuid": "8eeaa9cb4c1045a2825f8815fed69d72",
             "state": "Running",
             "status": "Connected",
             "type": "ApplianceVm",
             "uuid": "c5a966cb87d644649952daf683f89e26",
             "vmNics": [
                 {
                     "createDate": "Jan 30, 2016 3:06:50 PM",
                     "deviceId": 0,
                     "gateway": "192.168.200.1",
                     "ip": "192.168.201.195",
                     "l3NetworkUuid": "1a82c2691978476fa6cefa36bb9d4bfd",
                     "lastOpDate": "Jan 30, 2016 3:06:50 PM",
                     "mac": "fa:4c:01:68:77:00",
                     "metaData": "7",
                     "netmask": "255.255.252.0",
                     "uuid": "c44e856aa88a42bc85ec30ce8c334c6c",
                     "vmInstanceUuid": "c5a966cb87d644649952daf683f89e26"
                 }
             ],
             "zoneUuid": "4a3a78b1b9f049948b79cf9e667f0af2"
         }
     ],
     "success": true
 }

 &gt;&gt;&gt;DestroyVmInstance uuid=c5a966cb87d644649952daf683f89e26
 {
     "success": true
 }
</code></pre></li>
<li><p>重连所有有VM运行的host</p>

<pre><code> &gt;&gt;&gt;QueryHost
 {
     "inventories": [
         {
             "availableCpuCapacity": 7180,
             "availableMemoryCapacity": 1997570048,
             "clusterUuid": "4282fb61aa55458ea160de138e130298",
             "createDate": "Jan 30, 2016 2:51:13 PM",
             "hypervisorType": "KVM",
             "lastOpDate": "Jan 30, 2016 3:03:20 PM",
             "managementIp": "192.168.200.187",
             "name": "host1",
             "state": "Enabled",
             "status": "Connected",
             "totalCpuCapacity": 7182,
             "totalMemoryCapacity": 2098233344,
             "username": "root",
             "uuid": "402f8304a50c410486e023512492316b",
             "zoneUuid": "4a3a78b1b9f049948b79cf9e667f0af2"
         },
         {
             "availableCpuCapacity": 14363,
             "availableMemoryCapacity": 8321593344,
             "clusterUuid": "10409d3e33b249c19746022930a541c7",
             "createDate": "Jan 30, 2016 3:03:14 PM",
             "hypervisorType": "KVM",
             "lastOpDate": "Jan 30, 2016 3:03:52 PM",
             "managementIp": "192.168.200.150",
             "name": "host2",
             "state": "Enabled",
             "status": "Connected",
             "totalCpuCapacity": 14364,
             "totalMemoryCapacity": 8371924992,
             "username": "root",
             "uuid": "415fa093b34e4a3d873368104b127115",
             "zoneUuid": "4a3a78b1b9f049948b79cf9e667f0af2"
         }
     ],
     "success": true
 }

 &gt;&gt;&gt;ReconnectHost uuid=402f8304a50c410486e023512492316b
 {
     "success": true
 }

 &gt;&gt;&gt;ReconnectHost uuid=415fa093b34e4a3d873368104b127115
 {
     "success": true
 }
</code></pre></li>
</ol>


  </article>

  <div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = 'zstackorg';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>

    </div>
  </div>
</div>

<script src="/js/jquery-1.9.1.js"></script>
<script src="/css/bootstrap-3.3.1/js/bootstrap.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
    var path = window.location.pathname;
    if (path == '/') {
      $('#navHome').addClass('active');
      return;
    }

    var paths = path.split("/");
    var root = paths[1];
    switch(root){
      case 'installation':
        $('#navInstallation').addClass('active');
        break;
      case 'tutorials':
        $('#navTutorials').addClass('active');
        break;
      case 'documentation':
        $('#navDocumentation').addClass('active');
        break;
      case 'community':
        $('#navCommunity').addClass('active');
        break;
      case 'issues':
        $('#navIssues').addClass('active');
        break;
      case 'license':
        $('#navLicense').addClass('active');
        break;
      case 'blog':
        $('#navBlog').addClass('active');
        break;
    }
  });
</script>


<div id="footer">
  <div class="container zstack-footer-before zstack-footer-after">
    <div class="row zstack-footer-links">
      <div class="col-sm-3 col-sm-offset-1">
        <p class="footer-text-title">社区</p>
        <ul class="footer-ul">
          <li><a class="footer-text-link" href="https://groups.google.com/forum/#!forum/zstack"> 订阅邮件组</a></li>
          <li><a class="footer-text-link" href="http://www.zstack.org/community">社区介绍</a></li>
          <li><a class="footer-text-link" href="/cn/misc/qq.html">QQ群</li>
          <li><a class="footer-text-link" href="/cn/misc/wechat.html">微信订阅号</a></li>
        </ul>
      </div>
      <div class="col-sm-3">
        <p class="footer-text-title">资源</p>
        <ul class="footer-ul">
          <li><a class="footer-text-link" href="http://www.zstack.org/installation">安装手册</a></li>
          <li><a class="footer-text-link" href="http://www.zstack.org/tutorials">使用教程</a></li>
          <li><a class="footer-text-link" href="http://zstackdoc.readthedocs.org/en/latest/userManual/cli.html">zstack-cli命令行工具</a></li>
          <li><a class="footer-text-link" href="http://www.zstack.org/blog">新闻博客</a></li>
        </ul>
      </div>
      <div class="col-sm-4">
        <p class="footer-text-title">联系我们</p>
        <ul class="footer-ul">
          <a title="Twitter" class="contact-icon contact-icon-size fa fa-twitter" href="https://twitter.com/zstack_org" target="_blank"></a>&nbsp;&nbsp;
          <a title="Facebook" class="contact-icon contact-icon-size fa fa-facebook" href="https://www.facebook.com/zstackorg" target="_blank"></a>&nbsp;&nbsp;
          <a title="Github" class="contact-icon contact-icon-size fa fa-github-alt" href="https://github.com/zstackorg/zstack" target="_blank"></a>&nbsp;&nbsp;
          <a title="Wechat" class="contact-icon contact-icon-size fa fa-weixin" href="../misc/wechat.html" target="_blank"></a>&nbsp;&nbsp;
          <a title="Weibo" class="contact-icon contact-icon-size fa fa-weibo" href="http://weibo.com/zstack" target="_blank"></a>&nbsp;&nbsp;
        </ul>
        <ul class="footer-ul zstack-footer-before2">
          <li><i>ZStack 是开源的IaaS软件，其开源代码遵守 Apache 2.0 协议的规定.</i></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="footer-last">
  <div>
      <i><b>我们非常重视您的观点，请把您的想法告诉我们。 &nbsp;&nbsp;<a title="Email" class="contact-icon fa fa-envelope" href="mailto:info@zstack.org"></a></b> <i>
  </div>
</div>

</body>



</html>
